# Прогресс

## Что работает
*   Приложение запускается в строке меню macOS.
*   Иконка в строке меню с выпадающим меню и анимацией во время загрузки.
*   Отслеживание файлов в локальной папке с использованием `DispatchSourceFileSystemObject`.
*   SFTP-загрузка файлов с использованием `mft.framework`.
*   Перемещение файлов в "Uploaded" при успешной загрузке и в "Error" при ошибке.
*   Копирование публичного URL в буфер обмена при успешной загрузке.
*   Системные уведомления о статусе загрузки (успех/ошибка).
*   Окно настроек с вкладками "Основные" и "SFTP", сохранением всех настроек через `UserDefaults`.
*   Автоматический запуск отслеживания при старте приложения.
*   Автозапуск приложения при старте системы (macOS 13.0+).
*   Приложение работает в App Sandbox с необходимыми правами.
*   **Опциональное отображение иконки в доке.**
*   **Загрузка файлов перетаскиванием на иконку в доке.**
*   **Анимация иконки в доке во время загрузки.**
*   **Корректное управление состоянием приложения (`.accessory` vs `.regular`): после загрузки файла через "неактивную" иконку в доке, приложение возвращается в фоновый режим, и точка под иконкой исчезает.**

## Что осталось построить
*   Ожидание новых задач.

## Текущий статус
Все запланированные функции реализованы и протестированы.

## Известные проблемы
*   Нет.

## Эволюция проектных решений
*   Изначально планировалось использовать `SwiftNIO SSH`, но из-за проблем с линковкой было принято решение перейти на `mft.framework`.
*   API уведомлений был обновлен с устаревшего `NSUserNotificationCenter` на `UserNotifications.framework`.
*   Механизм автозапуска был обновлен для использования `SMAppService` (macOS 13.0+).
*   **Поведение иконки в доке эволюционировало от полного отсутствия до опционального отображения с полной поддержкой Drag & Drop и корректным управлением жизненным циклом приложения для обеспечения наилучшего пользовательского опыта.**
*   **Многочисленные неудачные попытки реализовать окно "drop zone", появляющееся при удержании файла над иконкой в доке, привели к решению отказаться от этого сложного и нестабильного подхода в пользу более простых и надежных решений.**
